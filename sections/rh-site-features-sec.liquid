<section class="rh-course-features" {% if section.settings.background_color %}style="background-color: {{ section.settings.background_color }};"{% endif %}>
  <div class="container_rh">
    <div class="course-features-wrapper-rh">
      {% for block in section.blocks %}
        <div class="feature-card-rh" {{ block.shopify_attributes }} 
             {% if block.settings.card_background_color %}style="background-color: {{ block.settings.card_background_color }};"{% endif %}>
          
          {% if block.settings.background_image %}
            <img src="{{ block.settings.background_image | img_url: 'master' }}" 
                 alt="{{ block.settings.background_image.alt | default: 'Background overlay' }}" 
                 class="background-image" />
          {% endif %}
          
          <div class="feature-card-content-rh">
            {% if block.settings.title %}
              <div class="feature-title">{{ block.settings.title }}</div>
            {% endif %}
            
            {% if block.settings.description %}
              <div class="feature-description">
                {{ block.settings.description }}
              </div>
            {% endif %}
            
            {% if block.settings.button_text and block.settings.button_url %}
              <a href="{{ block.settings.button_url }}" class="feature-button">
                {{ block.settings.button_text }}
              </a>
            {% endif %}
            
            {% if block.settings.feature_image %}
              <div class="feature-image">
                <img src="{{ block.settings.feature_image | img_url: 'master' }}" 
                     alt="{{ block.settings.feature_image.alt | default: 'Feature image' }}" 
                     class="feature-image-primary" />
              </div>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% style %}
  .rh-course-features {
    padding: 100px 20px;
    background: #f5f5f5;
  }

  .rh-course-features .container_rh {
    width: 100%;
    max-width: 1299px;
    margin: 0 auto;
  }

  .rh-course-features .container_rh .course-features-wrapper-rh {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: clamp(16px, 2vw, 24px);
    width: 100%;
    max-width: 1299px;
    margin: 0 auto;
  }

  .feature-card-rh {
    width: 100%;
    min-height: clamp(400px, 50vw, 531px);
    border-radius: clamp(20px, 3vw, 26.25px);
    position: relative;
    overflow: hidden;
    padding: clamp(24px, 4vw, 40px) clamp(20px, 3vw, 26px);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    background: #ff8e24; /* Default background color */
  }

  .feature-card-rh:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  }

  .feature-card-rh .background-image {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.3;
    z-index: 0;
  }

  .feature-card-rh .feature-card-content-rh {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .feature-card-rh .feature-title {
    font-family: "Lato", sans-serif;
    font-weight: 900;
    font-size: clamp(24px, 4vw, 30.29px);
    line-height: clamp(26px, 4.2vw, 32px);
    letter-spacing: normal;
    color: #ffffff;
    margin-bottom: clamp(8px, 1.5vw, 10px);
  }

  .feature-card-rh .feature-description {
    font-family: "Lato", sans-serif;
    font-weight: 700;
    font-size: clamp(16px, 2.5vw, 18.18px);
    line-height: clamp(24px, 3vw, 28.27px);
    letter-spacing: normal;
    color: #ffffff;
    margin: clamp(8px, 1.5vw, 10px) 0 clamp(16px, 2.5vw, 20px);
  }

  .feature-card-rh .feature-button {
    padding: clamp(6px, 1vw, 8px) clamp(10px, 1.5vw, 12px);
    background: #ffffff;
    border: 1px solid #ffffff;
    font-family: "Verdana", sans-serif;
    font-weight: 400;
    font-size: clamp(14px, 2vw, 16.16px);
    line-height: clamp(24px, 3vw, 30.29px);
    letter-spacing: normal;
    text-align: center;
    color: #101010;
    border-radius: clamp(28px, 4vw, 34.04px);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    cursor: pointer;
    width: fit-content;
  }

  .feature-card-rh .feature-button:hover {
    background: #f0f0f0;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  .feature-card-rh .feature-image {
    text-align: right;
    margin: auto -26px -50px auto;
  }

  .feature-card-rh .feature-image img {
    max-width: 100%;
    height: auto;
    width: clamp(200px, 25vw, 300px);
  }

  /* ===== RESPONSIVE GRID LAYOUTS ===== */
  @media (max-width: 1200px) {
    .rh-course-features .container_rh .course-features-wrapper-rh {
      grid-template-columns: repeat(2, 1fr);
      gap: clamp(16px, 2.5vw, 20px);
    }
    
    .feature-card-rh .feature-image {
      margin: auto -26px -45px auto;
    }
  }

  @media (max-width: 768px) {
    .rh-course-features .container_rh .course-features-wrapper-rh {
      grid-template-columns: 1fr;
      gap: clamp(16px, 3vw, 20px);
    }
    
    .feature-card-rh {
      min-height: clamp(350px, 45vw, 450px);
      padding: clamp(20px, 3vw, 30px) clamp(16px, 2.5vw, 20px);
    }
    
    .feature-card-rh .feature-title {
      font-size: clamp(20px, 5vw, 26px);
      line-height: clamp(22px, 5.5vw, 28px);
    }
    
    .feature-card-rh .feature-description {
      font-size: clamp(14px, 3.5vw, 16px);
      line-height: clamp(20px, 4vw, 24px);
    }
    
    .feature-card-rh .feature-image {
      margin: auto -16px -25px auto;
    }
    
    .feature-card-rh .feature-image img {
      width: clamp(150px, 30vw, 250px);
    }
  }

  @media (max-width: 480px) {
    .rh-course-features {
      padding: clamp(60px, 10vw, 80px) clamp(16px, 3vw, 20px);
    }
    
    .feature-card-rh {
      min-height: clamp(320px, 40vw, 400px);
      padding: clamp(16px, 3vw, 24px) clamp(12px, 2.5vw, 16px);
    }
    
    .feature-card-rh .feature-title {
      font-size: clamp(18px, 5.5vw, 24px);
      line-height: clamp(20px, 6vw, 26px);
    }
    
    .feature-card-rh .feature-description {
      font-size: clamp(13px, 4vw, 15px);
      line-height: clamp(18px, 4.5vw, 22px);
    }
    
    .feature-card-rh .feature-button {
      font-size: clamp(12px, 3.5vw, 14px);
      padding: clamp(5px, 1vw, 6px) clamp(8px, 1.5vw, 10px);
    }
    
    .feature-card-rh .feature-image {
      margin: auto -12px -25px auto;
    }
    
    .feature-card-rh .feature-image img {
      width: clamp(120px, 35vw, 200px);
    }
  }
{% endstyle %}

{% schema %}
{
  "name": "Site Features",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Section Background Color",
      "default": "#f5f5f5"
    }
  ],
  "blocks": [
    {
      "type": "feature_card",
      "name": "Feature Card",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Card Title",
          "default": "Feature Title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Card Description",
          "default": "Enter your feature description here"
        },
        {
          "type": "color",
          "id": "card_background_color",
          "label": "Card Background Color",
          "default": "#ff8e24"
        },
        {
          "type": "image_picker",
          "id": "background_image",
          "label": "Background Overlay Image"
        },
        {
          "type": "image_picker",
          "id": "feature_image",
          "label": "Feature Image"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Learn more"
        },
        {
          "type": "url",
          "id": "button_url",
          "label": "Button URL"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "SA Site Features",
      "blocks": [
        {
          "type": "feature_card",
          "settings": {
            "title": "Proven effective",
            "description": "Research has shown over and over that IXL produces real results.",
            "card_background_color": "#ff8e24",
            "button_text": "See the research"
          }
        },
        {
          "type": "feature_card",
          "settings": {
            "title": "Flexible for any classroom",
            "description": "Research has shown over and over that IXL produces real results.",
            "card_background_color": "#F5C41F",
            "button_text": "Hear their story"
          }
        },
        {
          "type": "feature_card",
          "settings": {
            "title": "Trusted by top teachers",
            "description": "Research has shown over and over that IXL produces real results.",
            "card_background_color": "#F34986",
            "button_text": "Get the details"
          }
        }
      ]
    }
  ]
}
{% endschema %}